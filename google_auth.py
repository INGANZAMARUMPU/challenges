from google.oauth2 import id_token
from google.auth.transport import requests

token = "eyJhbGciOiJSUzI1NiIsImtpZCI6Ijc3MjA5MTA0Y2NkODkwYTVhZWRkNjczM2UwMjUyZjU0ZTg4MmYxM2MiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJhenAiOiI0Mzk0MDk0NzgwNDItNGxkZTFncjA5YWYyNnBvM3NqZ3FyMHA1ZHRocGx1M3AuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQiOiI0Mzk0MDk0NzgwNDItMnRkbWlnYzBmZ2U4cGk1NTdwc2x2Y3M4NXN1dWU5cGkuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzdWIiOiIxMDUzMDEyMjU5NzY5Njg3MDI0NDYiLCJlbWFpbCI6Impvbmt1cjk2QGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJuYW1lIjoiSm9uYXRoYW4gTmt1cnVueml6YSIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHaFlMdDR2T2tBTWNRbzFTRldfWjl4N0F0NjFMOWdpbC1xcjFfOXpqQT1zOTYtYyIsImdpdmVuX25hbWUiOiJKb25hdGhhbiIsImZhbWlseV9uYW1lIjoiTmt1cnVueml6YSIsImxvY2FsZSI6ImZyIiwiaWF0IjoxNjIwMTIyNTY4LCJleHAiOjE2MjAxMjYxNjh9.SbqpiWpI9drY19QsHQoHhcEI--wtk7t4LMJgRf-UeElCUqtEdtHV7GGHLNrBqPNeGEx6xf4CxivGhYXXxVutFVr9ayWTC-LkEXQ82nmYS2Bi5kPpzV_OuHvMcHl1nnL1yn9JB5pz2ju7e5G7FMBzlmNdtEPO4_Y51pMig8tEDmJovw-KdluT6Kkmet66Efoo44gp3slXBxpXEW2jnFhsRmE5i4KitbZwfPBV9v2xW-Tbr2emeV08X9tPyHgYE0gkgRMV8NMQSTWRQtJZ1aAyHOqzBNmwnjKbIWBNjPbvzSVEXvreL2Sgi5oR7zJOhOlb9IbggVKURKbE1mmIyeI7cA"
CLIENT_ID = '439409478042-a970vkqj0ru69s7o41a4svdseovncrdr.apps.googleusercontent.com'
try:
    idinfo = id_token.verify_oauth2_token(token, requests.Request(), CLIENT_ID)
    userid = idinfo['sub']
    print(userid)
except ValueError as e:
	url = f"https://oauth2.googleapis.com/tokeninfo?id_token={token}"
	user_id_2 = requests.requests.get(url).json()
	if "email" in user_id_2:
		print(user_id_2)
	else:
		print(e)
